演習01-08-02
全称量化をNOT EXISTSではなくALL術語にて書き換え
作成日：6月21日
作成者：成田修之

select * 
from projects as p1
where 1 = all
	( select case when p2.step_nbr <= 1 and p2.status = '完了' then 1
		      when p2.step_nbr > 1 and p2.status = '待機' then 1
		      else 0 end
	 from projects as p2
	 where p1.project_id = p2.project_id
	)
;


 project_id | step_nbr | status
------------+----------+--------
 CS300      |        0 | 完了
 CS300      |        1 | 完了
 CS300      |        2 | 待機
 CS300      |        3 | 待機